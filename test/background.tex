\documentclass[12pt]{article}

% You need graphics package
\usepackage{manual}
\usepackage{color}
\usepackage{graphicx}
\usepackage{alltt}

\usepackage{pst-all}

%% advi must occur after packages using PStricks macros 
%% (it redefines some of them) 
\usepackage{advi}
\usepackage{advi-annot}

\usepackage{hyperref}


\def\mathsym#1{\ifmmode{#1}\else$#1$\fi}

\pagestyle{empty}

\definecolor{red}{rgb}{1.0,0.0,0.0}
\definecolor{green}{rgb}{0.0,1.0,0.0}
\definecolor{blue}{rgb}{0.0,0.0,1.0}
\definecolor{c1}{rgb}{1.0,0.0,0.0}
\definecolor{c2}{rgb}{0.5,0.4,0.0}
\definecolor{c3}{rgb}{0.0,0.8,0.0}
\definecolor{c4}{rgb}{0.0,0.4,0.5}
\definecolor{c5}{rgb}{0.0,0.0,1.0}
\definecolor{c6}{rgb}{0.5,0.0,0.5}

\def\smallpause{0.3}

\def\keymenu#1{\textcolor{red}{\underline{#1}}}

\def\advifooter{\vbox to 0em{\vbox to \vsize {\vfill
Press: \keymenu{n}ext page \keymenu{p}revious page
\keymenu{\textvisiblespace} next pause%
\hfill{\adviembed[sticky=advianim]{1.56cm}{1.824cm}{animate -geometry !g! -window !p advilogo.anim.gif}}
} \vss}}

\def\adviheader{\noindent
{\bf\Large Active dvi}\\
\includegraphics[width=\textwidth]{../tex/bar.jpg.eps}}

\let \Newpage \newpage
\def \newpage {\Newpage \advifooter\adviheader}

\def\adviemptyfooter{\vbox to 0em{\vbox to \vsize {\vfill
~~\vss\advikillembed{advianim}}}}

\def\lastpage{\Newpage\adviemptyfooter\adviheader}

%  \setlength\textwidth{660\p@}
%  \setlength\textheight{460\p@}

\begin{document}

% We use the default mode of advi that considers white as transparent
% as if \epstransparent has been evaluated.

\newpage

\subsection* {Modifying the page backround}

It is now possible to modify the background of your presentations, and
this file is a simple showcase for the current background effects.

\tableofcontents
\newpage

\section{Setting the background color}

This page has a yellow background because we included
in the LaTeX source of the page the following command:

  \begin{quote}
    \begin{verbatim}
        \advibg{color=Yellow} 
    \end{verbatim}
  \end{quote}
\advibg{color=Yellow} 

\newpage

\section{Setting the background image}

\advibg{image="world.jpg"} 

Wee can also set a background image, like \verb|world.jpg| which
is now in the test directory, by including in the page the command

  \begin{quote}
    \begin{verbatim}
        \advibg{image="world.jpg"} 
    \end{verbatim}
  \end{quote}

\parindent 0pt Note: the image formats supported depend on the variable
  \begin{quote}
CAMLIMAGESLIBS
  \end{quote}
in Advi's Makefile.config 
\newpage

\section{Positioning the background image}

As documented in the manual, the LaTeX macro for backgrounds has a wealth of options.\\
For example, there are several different ways to adapt an image to the size of the
background to fill, and they are declared with the \dockey{fit}{} parameter to \verb|\advibg|:

\dockey[auto]{fit}{fit style}
\begin{quote}
Fit the background image according to \docid{style}, which may only be 
{\tt auto} or one of the following keywords:
\begin{center}
\tt
auto \hfill {\rm or} \hfill
\begin{tabular}{l@{\qquad}c@{\qquad}r}
topleft&   top& topright\\
left&  center&  right \\
bottomleft& bottom & bottomright\\
\end{tabular}
\end{center}
The {\tt auto} fit mode means scale the image as desired in both directions
so that it fits the page. The other styles only allows the same scaling
factor in both directions:
\begin {itemize}

\item
Corner-styles mean adjust the image in the corner
and scale so that all the page is covered. 

\item
{\tt center} means scale the
image so that all the page is covered and center it on the page. 

\item
Segment-styles mean adjust the image and the page on the segment (in which
case, the image may not totally cover the page on the opposite side). 

\end {itemize}
\end{quote}

\framebox{Here come several slides meant to show the effect of these settings}

\newpage
\vfill
{\Huge Automatic fit (default)}
\vfill
This is obtained by not setting the \dockey{fit}{} parameter:\\
\advibg{image="world.jpg"}
\begin{center}
	\begin{verbatim}
	\advibg{image="world.jpg"}
	\end{verbatim}
\end{center}
\vfill
Resize the display window to see how this positioning option works.
\vfill

\newpage

\newcommand{\ttadvibg}{$\backslash$advibg}
\newcommand{\docfit}[1]{\vfill%
This is obtained by:\\%
\begin{center}
{#1}
\end{center}
\vfill%
Resize the display window to see how this positioning option works.%
\vfill%
}

\vfill
{\Huge Top}
\advibg{image="world.jpg",fit=top}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=top\}}
\newpage


\vfill
{\Huge Bottom}
\advibg{image="world.jpg",fit=bottom}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=bottom\}}

\newpage

\vfill
{\Huge Left}
\advibg{image="world.jpg",fit=left}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=left\}}

\newpage


\vfill
{\Huge Right}
\advibg{image="world.jpg",fit=right}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=right\}}

\newpage


\vfill
{\Huge Center}
\advibg{image="world.jpg",fit=center}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=center\}}

\newpage


\vfill
{\Huge TopLeft}
\advibg{image="world.jpg",fit=topleft}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=topleft\}}

\newpage


\vfill
{\Huge TopRight}
\advibg{image="world.jpg",fit=topright}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=topright\}}

\newpage


\vfill
{\Huge BottomLeft}
\advibg{image="world.jpg",fit=bottomleft}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=bottomleft\}}

\newpage


\vfill
{\Huge BottomRight}
\advibg{image="world.jpg",fit=bottomright}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=bottomright\}}

\newpage

\section{Alpha and blending}
\dockey[none]{alpha}{float}
\begin{quote}
Set the alpha factor for the background image to \docid{float}
(\doctt{none} means unset).
\end{quote}

\section{Blending}
\dockey[none]{blend}{blend mode}
\begin{quote}
Set the blend mode to \docid{blend mode}, which should be one of the
following (unchecked): {\tt difference}, XXX?
(\doctt{none} means unset).
\end{quote}

\framebox{Here are a few example slides}
\newpage

\vfill
{\Huge Alpha channel}
\vfill
In this page, the background is filled with an image for which we specify an alpha
value of less than 1.\\
Notice that this effect is nice, but expensive to realise.

Here is the command used to obtain this effect:

\begin{center}
{\tt \ttadvibg\{alpha=0.25,image="dojoji.gif"\}}
\end{center}
\advibg{alpha=0.25,image="dojoji.gif"}
\vfill
\newpage

\vfill
{\Huge Blending with a color background}
\vfill
In this page, the background is first set to light blue, then blended
in {\tt difference} mode with the image which is scaled to fit the available area.\\

Here is the command used to obtain this effect:

\begin{center}
{\tt \ttadvibg\{color=LightBlue,alpha=0.1,blend=difference,image="dojoji.gif"\}}
\end{center}
\advibg{color=LightBlue,alpha=0.1,blend=difference,image="dojoji.gif"}
\vfill

\Newpage

\special{color push white}
\advibg{color=black}
\advifooter\adviheader

\subsection{Reverse video effect}

If you want a reverse video effect, you just have to set the background
of the page to black and the text color to white, as follows:

\begin{itemize}

\item set the background to black, anywhere in the text of the slide with

  \begin{quote}
    \begin{verbatim}
        \advibg{color=Black} 
    \end{verbatim}
  \end{quote}

\item set the text color to white using
  \begin{quote}
    \begin{verbatim}
        \special{color push white}
    \end{verbatim}
  \end{quote}
at the beginning of the slide.

\end{itemize}

To revert to normal text color, use

  \begin{quote}
    \begin{verbatim}
        \special{color pop}
    \end{verbatim}
  \end{quote}

at the end of the slide. (Write \verb"\advibg{none}" at the
beginning of next slide, if you also want to revert to normal background.)

\special{color pop}

\newpage

\advibg{none}

\subsection* {TODO:}

  \begin{itemize}
    \item anybody willing to add support for color gradients?
  \end{itemize}

\newpage


\subsection* {Design considerations:}

  \begin{itemize}
    \item background preferences are ``asynchronous'', in the sense
that they can imply rendering modifications in a part of the page that
has already been displayed; this is why we first scan a page, looking
for background specials (example, a red background), and only after we
render it (setting the background to red before everything else). By
the way, this mechanism was already in place for handling PostScript
headers, that also appear asynchronously.
    \item is it worthwhile to consider the possibility of making a
``synchronous'' variant? This would allow for example to change the
background color after a pause. But at what price ?
  \end{itemize}

\lastpage

~\vfill
\begin{center}
\includegraphics[width=0.5\textwidth]{../tex/advilogo.eps}\\
{\Large \bf That's all, folks!!}
\end{center}
\vfill

\end{document}
