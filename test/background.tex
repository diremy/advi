\documentclass[12pt]{article}

% You need graphics package
\usepackage{../doc/manual}
\usepackage{color}
\usepackage{graphicx}
\usepackage{advi-graphicx}
\usepackage{alltt}

\usepackage{pst-all}

%% advi must occur after packages using PStricks macros 
%% (it redefines some of them) 
\usepackage{advi}
\usepackage{advi-annot}

\usepackage{hyperref}


\def\mathsym#1{\ifmmode{#1}\else$#1$\fi}

\pagestyle{empty}

\definecolor{red}{rgb}{1.0,0.0,0.0}
\definecolor{green}{rgb}{0.0,1.0,0.0}
\definecolor{blue}{rgb}{0.0,0.0,1.0}
\definecolor{lightblue}{rgb}{0.6784,0.8471,0.9020}
\definecolor{c1}{rgb}{1.0,0.0,0.0}
\definecolor{c2}{rgb}{0.5,0.4,0.0}
\definecolor{c3}{rgb}{0.0,0.8,0.0}
\definecolor{c4}{rgb}{0.0,0.4,0.5}
\definecolor{c5}{rgb}{0.0,0.0,1.0}
\definecolor{c6}{rgb}{0.5,0.0,0.5}

\def\smallpause{0.3}

\def\keymenu#1{\textcolor{red}{\underline{#1}}}

\def\advifooter{\vbox to 0em{\vbox to \vsize {\vfill
Press: \keymenu{n}ext page \keymenu{p}revious page
\keymenu{\textvisiblespace} next pause%
\hfill{\adviembed[sticky=advianim,width=1.56cm,height=1.824cm]{animate -geometry !g! -window !p advilogo.anim.gif}}
} \vss}}

\def\adviheader{\noindent
{\bf\Large \ActiveDVI}\\
\includegraphics[width=\textwidth]{../tex/bar.jpg.eps}}

\let \Newpage \newpage
\def \newpage {\Newpage \advifooter\adviheader}

\def\adviemptyfooter{\vbox to 0em{\vbox to \vsize {\vfill
~~\vss\advikillembed{advianim}}}}

\def\lastpage{\Newpage\adviemptyfooter\adviheader}

%  \setlength\textwidth{660\p@}
%  \setlength\textheight{460\p@}

\begin{document}

% We use the default mode of advi that considers white as transparent
% as if \epstransparent has been evaluated.

\newpage

\subsection* {Modifying the page backround}

You can modify the background of your presentations:
  \begin{itemize}
    \item define the background color
    \item define a function to be run on the background (this is
    limited to a few color gradients, but it can be expanded to more
    sophisticated effects) 
    \item add a background image (which can be alpha-blended on top of
    the background color).
  \end{itemize}
If these options are used \emph{together}, they are currently applied
in the abovementioned order
(i.e.\ color, then function, then image).\\

This file is a simple showcase for the current background effects.

\tableofcontents
\newpage

\section{Setting the background color}

This page has a yellow background because we included
in the LaTeX source of the page the following command:

\begin{quote}
  \begin{verbatim}
      \advibg{color=yellow} 
   \end{verbatim}
\end{quote}
\advibg{color=yellow} 

\newpage

\section{Setting the background color: gradients}

By choosing one of the \verb|hgradient|, \verb|vgradient| or
\verb|dgradient| predefined functions, we can convert the background
color into a color gradient from the chosen color to white.

For example, here is the effect produced by insering in the LaTeX
source of the page the following command:

\begin{quote}
  \begin{verbatim}
      \advibg{color=yellow,fun="hgradient"} 
   \end{verbatim}
\end{quote}
\advibg{color=yellow,fun="hgradient"} 

\newpage

Here is the effect produced by the following command:

\begin{quote}
  \begin{verbatim}
      \advibg{color=blue,fun="vgradient"} 
   \end{verbatim}
\end{quote}
\advibg{color=blue,fun="vgradient"} 

\newpage

Here is the effect produced by the following command:

\begin{quote}
  \begin{verbatim}
      \advibg{color=green,fun="dgradient"} 
   \end{verbatim}
\end{quote}
\advibg{color=green,fun="dgradient"} 

\newpage


\section{Setting the background image}

\advibg{image="world.jpg"} 

We can use an image as background.
This page's background is made of \verb|world.jpg| which
is in the test directory. The source of this page contains

  \begin{quote}
    \begin{verbatim}
        \advibg{image="world.jpg"} 
    \end{verbatim}
  \end{quote}

\parindent 0pt Note: the image formats supported depend on the variable
  \begin{quote}
CAMLIMAGESLIBS
  \end{quote}
in your Advi's Makefile.config .
\newpage

\section{Positioning the background image}

As documented in the manual, the LaTeX macro for backgrounds has a
wealth of options.\\
For example, there are several different ways to adapt an image to the
size of the background to fill, and they are declared with the
\dockey{fit}{} parameter to \verb|\advibg|:

\dockey[auto]{fit}{fit style}
\begin{quote}
Fit the background image according to \docid{style}, which may only be 
{\tt auto} or one of the following keywords:
\begin{center}
\tt
auto \hfill {\rm or} \hfill
\begin{tabular}{l@{\qquad}c@{\qquad}r}
topleft&   top& topright\\
left&  center&  right \\
bottomleft& bottom & bottomright\\
\end{tabular}
\end{center}
The {\tt auto} fit mode means scale the image as desired in both directions
so that it fits the page. The other styles only allows the same scaling
factor in both directions:
\begin {itemize}

\item
Corner-styles mean adjust the image in the corner
and scale so that all the page is covered. 

\item
{\tt center} means scale the
image so that all the page is covered and center it on the page. 

\item
Segment-styles mean adjust the image and the page on the segment (in which
case, the image may not totally cover the page on the opposite side). 

\end {itemize}
\end{quote}

\framebox{Here come several slides meant to show the effect of these settings}

\newpage
\vfill
{\Huge Automatic fit (default)}
\vfill
This is obtained by not setting the \dockey{fit}{} parameter:\\
\advibg{image="world.jpg"}
\begin{center}
	\begin{verbatim}
	\advibg{image="world.jpg"}
	\end{verbatim}
\end{center}
\vfill
Resize the display window to see how this positioning option works.
\vfill

\newpage

\newcommand{\ttadvibg}{$\backslash$advibg}
\newcommand{\docfit}[1]{\vfill%
This is obtained by:\\%
\begin{center}
{#1}
\end{center}
\vfill%
Resize the display window to see how this positioning option works.%
\vfill%
}

\vfill
{\Huge Top}
\advibg{image="world.jpg",fit=top}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=top\}}
\newpage


\vfill
{\Huge Bottom}
\advibg{image="world.jpg",fit=bottom}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=bottom\}}

\newpage

\vfill
{\Huge Left}
\advibg{image="world.jpg",fit=left}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=left\}}

\newpage


\vfill
{\Huge Right}
\advibg{image="world.jpg",fit=right}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=right\}}

\newpage


\vfill
{\Huge Center}
\advibg{image="world.jpg",fit=center}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=center\}}

\newpage


\vfill
{\Huge TopLeft}
\advibg{image="world.jpg",fit=topleft}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=topleft\}}

\newpage


\vfill
{\Huge TopRight}
\advibg{image="world.jpg",fit=topright}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=topright\}}

\newpage


\vfill
{\Huge BottomLeft}
\advibg{image="world.jpg",fit=bottomleft}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=bottomleft\}}

\newpage


\vfill
{\Huge BottomRight}
\advibg{image="world.jpg",fit=bottomright}
\docfit{\tt \ttadvibg\{image="world.jpg",fit=bottomright\}}

\newpage

\section{Alpha and blending}
\dockey[none]{alpha}{float}
\begin{quote}
Set the alpha factor for the background image to \docid{float}
(\doctt{none} means unset).
\end{quote}

\section*{Blending}
\dockey[none]{blend}{blend mode}
\begin{quote}
Set the blend mode to \docid{blend mode}, which should be one of the
following: {\tt normal}, {\tt multiply}, {\tt screen},
{\tt overlay}, {\tt dodge}, {\tt burn}, {\tt darken},
{\tt lighten}, {\tt difference}, {\tt exclusion}, and {\tt none}
(\doctt{none} means unset).
\end{quote}

\framebox{Here are a few example slides}
\newpage

\bigskip

\def\exampleimage{
 {\includegraphics[width=\textwidth]{../tex/bar.jpg.eps}}
 {\includegraphics[width=0.2\textwidth]{dojojismall.jpg}}
}

{\large Normal mode}

{\setblend{normal}{\exampleimage}}

{\large Multiply mode}

{\setblend{multiply}{\exampleimage}}

{\large Screen mode}

{\setblend{screen}{\exampleimage}}

\advibg{color=lightgray} 

\newpage

\bigskip

{\large Overlay mode}

{\setblend{overlay}{\exampleimage}}

{\large Dodge mode}

{\setblend{dodge}{\exampleimage}}

{\large Burn mode}

{\setblend{burn}{\exampleimage}}

\advibg{color=lightgray} 

\newpage

\bigskip

{\large Darken mode}

{\setblend{darken}{\exampleimage}}

{\large Lighten mode}

{\setblend{lighten}{\exampleimage}}

\advibg{color=lightgray} 

\newpage

\bigskip

{\large Difference mode}

{\setblend{difference}{\exampleimage}}

{\large Exclusion mode}

{\setblend{exclusion}{\exampleimage}}

\advibg{color=lightgray} 

\newpage

\vfill
{\Huge Alpha channel}
\vfill
In this page, the background is filled with an image for which we
specify an alpha value of less than 1.\\ 
Notice that this effect is nice, but expensive to realize.

Here is the command used to obtain it:

\begin{center}
{\tt \char`\\advibg\{alpha=0.25,image="dojoji.gif"\}}
\end{center}
\advibg{alpha=0.25,image="dojoji.gif"}
\vfill
\newpage

\vfill
{\Huge Blending with a color background}
\vfill
In this page, the background is first set to light blue, then blended
in {\tt difference} mode with the image which is scaled to fit the
available area.\\

Here is the command used to obtain this effect:

\begin{center}
{\tt \char`\\advibg\{color=lightblue, alpha=0.1, blend=difference, image="dojoji.gif"\}}
\end{center}

\advibg{color=lightblue, alpha=0.1, blend=difference, image="dojoji.gif"} 
\vfill

\Newpage

\advibg{color=black}

{\color{white}
\advifooter\adviheader

\section{Reverse video effect}

If you want a reverse video effect, you just have to set the background
of the page to black and the text color to white, as follows:

\begin{itemize}

\item set the background to black, anywhere in the text of the slide with

  \begin{quote}
    \begin{verbatim}
        \advibg{color=black} 
    \end{verbatim}
  \end{quote}

\item set the text color of the entire page to white, by putting the
text of the page between in the scope of a \verb"\color" macro call:
  \begin{quote}
    \begin{verbatim}
        {\color{white}
          Text of the page
        }
    \end{verbatim}
  \end{quote}

\end{itemize}

Write \verb"\advibg{none}" at the beginning of the next slide, if you
want to revert to normal background.

}

\newpage

\advibg{none}

\section{Future work}

\subsection* {Design considerations}

  \begin{itemize}
    \item background preferences are ``asynchronous'', in the sense
that they can imply rendering modifications in a part of the page that
has already been displayed; this is why we first scan a page, looking
for background specials (example, a red background), and only after we
render it (setting the background to red before everything else). By
the way, this mechanism was already in place to handle PostScript
headers, that also appear asynchronously.

    \item is it worthwhile to consider the possibility of making a
``synchronous'' variant? This would allow for example to change the
background color after a pause. But at what price ?

    \item anybody willing to add support for color gradients?\\Done.
  \end{itemize}

\newpage

\advibg{color=cyan}

\vfill
{\large {Plain cyan color: {\verb|\advibg{color=cyan}|}}}
\vfill

\newpage

\advibg{color=cyan,fun="vgradient"}

\vfill
{\large {Cyan with vertical gradient
\verb|\advibg{color=cyan,fun="vgradient"}|}}
\vfill

\newpage

\advibg{alpha="0.1",image="dojojismall.jpg",color=cyan,fun="vgradient"}

\vfill
{\large {Cyan with vertical gradient and alpha = 0.1 blended image
\verb|\advibg{alpha="0.1",image="dojojismall.jpg",color=cyan,fun="vgradient"}|
}}
\vfill

\newpage

\advibg{alpha="0.2",color=cyan,image="dojojismall.jpg",fun="vgradient"}

\vfill
{\large {Cyan with vertical gradient and alpha = 0.2 blended image\\
\verb|\advibg{alpha="0.2",color=cyan,image="dojojismall.jpg",fun="vgradient"}|
}}
\vfill

\newpage

\advibg{alpha="0.4",fun="vgradient",color=cyan,image="dojojismall.jpg"}

\vfill
{\large {Cyan with vertical gradient and alpha = 0.4 blended
image\\
\verb|\advibg{alpha="0.4",fun="vgradient",color=cyan,image="dojojismall.jpg"}|
}}
\vfill

\newpage

\advibg{alpha="0.8",fun="vgradient",color=cyan,image="dojojismall.jpg"}

\vfill
{\large {Cyan with vertical gradient and alpha = 0.8 blended
image\\
\verb|\advibg{alpha="0.8",fun="vgradient",color=cyan,image="dojojismall.jpg"}|
}}
\vfill

\newpage

\advibg{color=cyan,image="dojojismall.jpg",alpha=0.25}
\verb|\advibg{color=cyan,image="dojojismall.jpg",alpha=0.25}|

\section{Future work}

  \begin{itemize}
    \item background preferences are ``asynchronous'', in the sense
that they can imply rendering modifications in a part of the page that
has already been displayed; this is why we first scan a page, looking
for background specials (example, a red background), and only after we
render it (setting the background to red before everything else). By
the way, this mechanism was already in place to handle PostScript
headers, that also appear asynchronously.

    \item is it worthwhile to consider the possibility of making a
``synchronous'' variant? This would allow for example to change the
background color after a pause. But at what price ?

    \item anybody willing to add support for color gradients with
function arguments and more fancy variants ?\\
Done.
  \end{itemize}

\lastpage

~\vfill
\begin{center}
\includegraphics[width=0.5\textwidth]{../tex/advilogo.eps}\\
{\Large \bf That's all, folks!!}
\end{center}
\vfill

\end{document}
